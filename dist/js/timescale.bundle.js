(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{16:function(t,e,a){"use strict";a.r(e);var r=a(7),n=a(17),d=a(12),s=a(13),i=a(14),l=a(11);const c=function(){r.e.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};let t=window.innerWidth-4;let e,a;return{init:d=>{Object(r.c)(`#${d}`).attr("class","timescale");const l=Object(r.c)(`#${d}`).append("svg").attr("width",t).attr("height",190).append("g"),o=l.append("g").attr("id","tickBar").attr("transform","translate(0,145)");a=Object(n.a)().range([5,t]).domain([5,t]);const p=Object(s.a)().size([t,150]).padding(0);Object(i.a)("intervals.json").then(a=>{e=Object(s.b)().id(t=>t.id).parentId(t=>t.parentId)(a.records),Object(s.a)(e.sum(t=>5===t.level?t.start-t.end:0)),p(e),l.append("g").attr("id","rectGroup").selectAll("rect").data(e.descendants()).join("rect").attr("x",t=>t.x0).attr("y",t=>t.y0).attr("width",t=>t.x1-t.x0).attr("height",t=>t.y1-t.y0).attr("fill",t=>t.data.color).attr("id",t=>`t${t.data.id}`).style("opacity",.83).on("click",t=>c.goTo(t)).append("title").text(t=>`${t.ancestors().map(t=>t.data.name).reverse().join(" > ")}`);const n=new Set(e.descendants().map(t=>t.data.start)),d=Array.from(n).map(t=>e.descendants().find(e=>e.data.start===t)),i=o.selectAll("rect").data(d).enter().append("g").attr("class",t=>`tickGroup s${t.depth}`).attr("transform",t=>`translate(${t.x0}, 0)`);i.append("line").attr("x1",0).attr("y1",7.5).attr("x2",0).attr("y2",t=>52-8*t.depth).style("stroke-width",t=>"0.05em"),i.append("text").attr("x",0).attr("y",t=>60-8*t.depth).style("text-anchor",t=>.0117!==t.data.start?"middle":"end").style("font-size",t=>`${.9-.08*t.depth}em`).attr("paint-order","stroke").attr("stroke-width","1.5px").attr("stroke","#fff").attr("stroke-linecap","butt").attr("stroke-linejoin","miter").text(t=>t.data.start);const b=o.append("g").data([{x0:t,y0:0}]).attr("class","tickGroup s1 s2 s3 s4 s5").attr("transform",`translate(${t}, 0)`);b.append("line").attr("x1",0).attr("y1",6).attr("x2",0).attr("y2",12).style("stroke-width","0.05em"),b.append("text").attr("x",4).attr("y",25).attr("id","now").style("fill","white").style("text-anchor","end").style("font-size","1.2em").style("fill","#777").text("0");const h=l.append("g").attr("id","textGroup");h.append("g").attr("id","fullNames").selectAll("text").data(e.descendants()).join("text").text(t=>t.data.name).attr("y",t=>t.y0+15).attr("width",40).attr("height",t=>t.y1-t.y0).attr("class",t=>`fullName level${t.depth}`).attr("id",t=>`l${t.data.id}`).attr("x",t=>c.labelX(t)).on("click",t=>c.goTo(t)),h.append("g").attr("id","abbrevs").selectAll("text").data(e.descendants()).join("text").text(t=>t.data.abr||t.data.name.charAt(0)).attr("y",t=>t.y0+15).attr("width",30).attr("height",t=>t.y1-t.y0).attr("class",t=>`abbr level${t.depth}`).attr("id",t=>`a${t.data.id}`).attr("x",t=>c.labelAbbrX(t)).on("click",t=>c.goTo(t)),c.goTo(e),Object(r.c)(".abbr.levelundefined").remove(),c.goToName("Phanerozo√Øcum")}),Object(r.c)(window).on("resize",c.resize)},labelAbbrX(t){const e=a(t.x1)-a(t.x0),n=a(t.x0),d=Object(r.c)(`#a${t.data.id}`).node().getComputedTextLength();return e-8<d&&Object(r.c)(`#a${t.data.id}`).style("display","none"),n+(e-d)/2},labelX(t){const e=a(t.x1)-a(t.x0),n=a(t.x0);let d;try{d=Object(r.c)(`#l${t.data.id}`).node().getComputedTextLength()}catch(t){d=25}return e-8<d?Object(r.c)(`#l${t.data.id}`).style("display","none"):Object(r.c)(`#a${t.data.id}`).style("display","none"),n+(e-d)/2},goToName(t){const a=function t(e,a,r){if(e.data[a]===r)return e;if(null!=e.children){let n=null;for(let d=0;null==n&&d<e.children.length;d++)n=t(e.children[d],a,r);return n}return null}(e,"name",t);c.goTo(a)},goTo(e){c.currentInterval=e,Object(r.d)(".fullName, .abbr").style("display","block"),a=Object(n.a)().range([5,t]).domain([e.x0,e.x1]);const s=Object(d.a)().duration(300).ease(l.b);if(0===e.depth||1===e.depth?Object(r.d)(".s5, .s4").transition(s).style("display","none"):Object(r.d)(".s5, .s4").transition(s).style("display","block"),Object(r.d)("rect").transition(s).attr("x",t=>a(t.x0)).attr("width",t=>a(t.x1)-a(t.x0)),Object(r.d)(".tickGroup").transition(s).attr("transform",(function(e){return Object(r.c)(this).selectAll("text").style("text-anchor","middle"),5===a(e.x0)?Object(r.c)(this).select("text").style("text-anchor","start"):a(e.x0)===t&&Object(r.c)(this).select("text").style("text-anchor","end"),`translate(${a(e.x0)}, 0)`})),Object(r.d)(".fullName").transition(s).attr("x",t=>this.labelX(t)).attr("height",t=>t.y1-t.y0),Object(r.d)(".abbr").transition(s).attr("x",t=>this.labelAbbrX(t)).attr("height",t=>t.y1-t.y0),Object(r.c)(`#l${e.data.id}`).transition(s).attr("x",t/2),e.parent){e.ancestors().forEach(e=>{Object(r.c)(`#l${e.id}, #a${e.id}`).transition(s).attr("x",t/2)})}},resize(){t=window.innerWidth-4,Object(r.c)(".timescale svg").style("width",t)}}}();e.default=c}}]);
//# sourceMappingURL=timescale.bundle.js.map