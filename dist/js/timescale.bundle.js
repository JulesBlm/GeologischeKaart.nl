(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{32:function(t,e,a){"use strict";a.r(e);var r=a(17),n=a(33),s=a(34),i=a(36),l=a(24),d=a(38),o=a(37),c=a(25),p=a(35);const h=function(){r.b.prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};let t=window.innerWidth-4;let e,a;return{init:r=>{Object(n.a)(`#${r}`).attr("class","timescale");const s=Object(n.a)(`#${r}`).append("svg").attr("width",t).attr("height",190).append("g"),l=s.append("g").attr("id","tickBar").attr("transform","translate(0,145)");a=Object(i.a)().range([5,t]).domain([5,t]);const p=Object(d.a)().size([t,150]).padding(0);Object(c.a)("jsons/intervals.json").then(a=>{e=Object(o.a)().id(t=>t.id).parentId(t=>t.parentId)(a.records),Object(d.a)(e.sum(t=>5===t.level?t.start-t.end:0)),p(e),s.append("g").attr("id","rectGroup").selectAll("rect").data(e.descendants()).join("rect").attr("x",t=>t.x0).attr("y",t=>t.y0).attr("width",t=>t.x1-t.x0).attr("height",t=>t.y1-t.y0).attr("fill",t=>t.data.color).attr("id",t=>`t${t.data.id}`).style("opacity",.83).on("click",t=>h.goTo(t)).append("title").text(t=>`${t.ancestors().map(t=>t.data.name).reverse().join(" > ")}`);const r=new Set(e.descendants().map(t=>t.data.start)),i=Array.from(r).map(t=>e.descendants().find(e=>e.data.start===t)),c=l.selectAll("rect").data(i).enter().append("g").attr("class",t=>`tickGroup s${t.depth}`).attr("transform",t=>`translate(${t.x0}, 0)`);c.append("line").attr("x1",0).attr("y1",7.5).attr("x2",0).attr("y2",t=>52-8*t.depth).style("stroke-width",t=>"0.05em"),c.append("text").attr("x",0).attr("y",t=>60-8*t.depth).style("text-anchor",t=>.0117!==t.data.start?"middle":"end").style("font-size",t=>`${.9-.08*t.depth}em`).attr("paint-order","stroke").attr("stroke-width","1.5px").attr("stroke","#fff").attr("stroke-linecap","butt").attr("stroke-linejoin","miter").text(t=>t.data.start);const b=l.append("g").data([{x0:t,y0:0}]).attr("class","tickGroup s1 s2 s3 s4 s5").attr("transform",`translate(${t}, 0)`);b.append("line").attr("x1",0).attr("y1",6).attr("x2",0).attr("y2",12).style("stroke-width","0.05em"),b.append("text").attr("x",4).attr("y",25).attr("id","now").style("fill","white").style("text-anchor","end").style("font-size","1.2em").style("fill","#777").text("0");const x=s.append("g").attr("id","textGroup");x.append("g").attr("id","fullNames").selectAll("text").data(e.descendants()).join("text").text(t=>t.data.name).attr("y",t=>t.y0+15).attr("width",40).attr("height",t=>t.y1-t.y0).attr("class",t=>`fullName level${t.depth}`).attr("id",t=>`l${t.data.id}`).attr("x",t=>h.labelX(t)).on("click",t=>h.goTo(t)),x.append("g").attr("id","abbrevs").selectAll("text").data(e.descendants()).join("text").text(t=>t.data.abr||t.data.name.charAt(0)).attr("y",t=>t.y0+15).attr("width",30).attr("height",t=>t.y1-t.y0).attr("class",t=>`abbr level${t.depth}`).attr("id",t=>`a${t.data.id}`).attr("x",t=>h.labelAbbrX(t)).on("click",t=>h.goTo(t)),h.goTo(e),Object(n.a)(".abbr.levelundefined").remove(),h.goToName("Phanerozo√Øcum")}),Object(n.a)(window).on("resize",h.resize)},labelAbbrX(t){const e=a(t.x1)-a(t.x0),r=a(t.x0),s=Object(n.a)(`#a${t.data.id}`).node().getComputedTextLength();return e-8<s&&Object(n.a)(`#a${t.data.id}`).style("display","none"),r+(e-s)/2},labelX(t){const e=a(t.x1)-a(t.x0),r=a(t.x0);let s;try{s=Object(n.a)(`#l${t.data.id}`).node().getComputedTextLength()}catch(t){s=25}return e-8<s?Object(n.a)(`#l${t.data.id}`).style("display","none"):Object(n.a)(`#a${t.data.id}`).style("display","none"),r+(e-s)/2},goToName(t){const a=function t(e,a,r){if(e.data[a]===r)return e;if(null!=e.children){let n=null;for(let s=0;null==n&&s<e.children.length;s++)n=t(e.children[s],a,r);return n}return null}(e,"name",t);h.goTo(a)},goTo(e){h.currentInterval=e,Object(s.a)(".fullName, .abbr").style("display","block"),a=Object(i.a)().range([5,t]).domain([e.x0,e.x1]);const r=Object(l.a)().duration(300).ease(p.a);if(0===e.depth||1===e.depth?Object(s.a)(".s5, .s4").transition(r).style("display","none"):Object(s.a)(".s5, .s4").transition(r).style("display","block"),Object(s.a)("rect").transition(r).attr("x",t=>a(t.x0)).attr("width",t=>a(t.x1)-a(t.x0)),Object(s.a)(".tickGroup").transition(r).attr("transform",(function(e){return Object(n.a)(this).selectAll("text").style("text-anchor","middle"),5===a(e.x0)?Object(n.a)(this).select("text").style("text-anchor","start"):a(e.x0)===t&&Object(n.a)(this).select("text").style("text-anchor","end"),`translate(${a(e.x0)}, 0)`})),Object(s.a)(".fullName").transition(r).attr("x",t=>this.labelX(t)).attr("height",t=>t.y1-t.y0),Object(s.a)(".abbr").transition(r).attr("x",t=>this.labelAbbrX(t)).attr("height",t=>t.y1-t.y0),Object(n.a)(`#l${e.data.id}`).transition(r).attr("x",t/2),e.parent){e.ancestors().forEach(e=>{Object(n.a)(`#l${e.id}, #a${e.id}`).transition(r).attr("x",t/2)})}},resize(){t=window.innerWidth-4,Object(n.a)(".timescale g").attr("transform",()=>`scale(${parseInt(Object(n.a)(".timescale").style("width"))/961}`),Object(n.a)(".timescale svg").style("width",()=>Object(n.a)(".timescale").style("width")).style("height",()=>`${.25*parseInt(Object(n.a)(".timescale").style("width"))}px`)}}}();e.default=h}}]);
//# sourceMappingURL=timescale.bundle.js.map