{"version":3,"sources":["timescale.js","ControlPanel.js","App.js","serviceWorker.js","index.js"],"names":["d3_selection__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","d3_scale__WEBPACK_IMPORTED_MODULE_1__","d3_transition__WEBPACK_IMPORTED_MODULE_2__","d3_hierarchy__WEBPACK_IMPORTED_MODULE_3__","d3_fetch__WEBPACK_IMPORTED_MODULE_4__","d3_ease__WEBPACK_IMPORTED_MODULE_5__","timescale","searchTree","node","property","match","data","children","result","i","length","selection","prototype","moveToFront","this","each","parentNode","appendChild","width","window","innerWidth","height","oid","nam","interval_hash","0","currentInterval","root","init","div","select","attr","time","append","scale","concat","partitionFunc","partition","size","padding","json","then","records","forEach","pid","abr","charAt","mid","parseInt","eag","lag","total","push","hierarchy","sum","d","selectAll","descendants","enter","x0","y0","x1","y1","col","style","on","goTo","hash","lvl","text","now","textGroup","getComputedTextLength","labelX","labelAbbrX","remove","resize","rectWidth","parseFloat","rectX","labelWidth","err","parent","depth","x","scaleLinear","range","domain","t","transition","duration","ease","easeLinear","abbrevWidth","loc","_loop","eval","filter","highlight","id","cxi","e","replace","unhighlight","defaultContainer","_ref","react_default","a","createElement","className","ControlPanel","props","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","index","handleClick","bind","assertThisInitialized","amount","setState","prevState","place","plaatsen","_easeTo","period","_this2","Container","containerComponent","currentPlace","name","dangerouslySetInnerHTML","__html","description","onClick","disabled","PureComponent","console","log","FlyToInterpolator","App","mapStyle","viewState","longitude","latitude","zoom","maxZoom","pitch","bearing","objectSpread","transitionDuration","transitionInterpolator","_onWebGLInitialized","gl","_onMapLoad","map","_map","deck","_deck","addLayer","MapboxLayer","_resize","_onHover","_onViewStateChange","_renderTooltip","addEventListener","removeEventListener","innerHeight","_ref2","y","object","hoveredObject","_this$state","top","left","zIndex","key","properties","KRTCODE","info","_interruptionStyle","_ref3","_this$props$data","geomap","GeoJsonLayer","opacity","stroked","filled","fp64","getFillColor","f","color","getLineColor","pickable","onHover","_this$state2","_this$props$controlle","controller","type","MapController","dragRotate","Fragment","deckgl","ref","layers","_renderLayers","onViewportChange","onWebGLInitialized","esm","getMap","onLoad","reuseMaps","preventStyleDiffing","mapboxApiAccessToken","process","minZoom","minPitch","maxPitch","ControlPanel_ControlPanel","Component","Boolean","location","hostname","ReactDOM","render","App_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.854dbeae.chunk.js","sourcesContent":["// 1. Fix drag\n// 2. Fix ticks\n\nimport { selection, select, selectAll } from \"d3-selection\"; //event\n// import { drag } from \"d3-drag\"\nimport { scaleLinear } from \"d3-scale\";\nimport { transition } from \"d3-transition\";\nimport { partition, hierarchy } from \"d3-hierarchy\";\nimport { json } from \"d3-fetch\";\nimport { easeLinear } from \"d3-ease\";\n\nconst timescale = (function() {\n  // Via http://stackoverflow.com/questions/14167863/how-can-i-bring-a-circle-to-the-front-with-d3\n  // Necessary for highlighting time intervals properly\n  selection.prototype.moveToFront = function() {\n    return this.each(function(){\n      this.parentNode.appendChild(this);\n    });\n  };\n\n  // Via https://stackoverflow.com/questions/9133500/how-to-find-a-node-in-a-tree-with-javascript\n  function searchTree(node, property, match){\n    if (property === \"nam\" || \"oid\" || \"mid\" || \"lag\" || \"\") {\n      if (node.data[property] === match){\n        return node;\n      } else if (node.children != null){\n          let result = null;\n          for (let i=0; result == null && i < node.children.length; i++) {\n            result = searchTree(node.children[i], property, match);\n          }\n          return result;\n      }\n      return null;\n    } else {\n      console.warn(\"Property can't be used to search\")\n    }\n  }\n\n  let width = 0.3 * window.innerWidth - 4;\n  const height = 130;\n\n  // Initialize data\n  const data = { oid: 0, nam: \"Geologische Tijdschaal\", children: [] };\n  const interval_hash = { 0: data };\n  let currentInterval;\n  let root;\n\n  return {\n\n    \"init\": function(div) {\n\n      // let newX = 0.01;\n      // let transformStart;\n      // let dragStart;\n\n      // const dragFunc = drag()\n      //   .subject(function() { \n      //     // const t = select(\".timescale g\");\n      //     return {x: newX, y: 0};\n      //   })\n      //   .on(\"start\", function() {\n      //     dragStart = event.pageX;\n      //     // console.log(\"timescale > g\", select(\".timescale\").select(\"g\"))\n      //     // console.log(\"attr transform\", select(\".timescale\").select(\"g\").attr(\"transform\")) // Only show a scale transform no translate\n      //     transformStart = getTransformation(select(\".timescale\").select(\"g\").attr(\"transform\"));\n      //     // console.log({transformStart})\n      //     event.sourceEvent.stopPropagation();\n      //   })\n      //   .on(\"drag\", function() {\n      //   \tconst currentDrag = event.pageX;\n\n      //    \tnewX = (dragStart - currentDrag);\n\n      //     select(\".timescale\").select(\"g\")\n      //       .attr(\"transform\", function() {\n      //         return `translate(${[ parseInt(transformStart[0] + -newX), 0 ]}) scale(${parseInt(select(\".timescale\").style(\"width\"))/width})`;\n      //       });\n      //   });\n      \n      // Add class timescale to whatever div was supplied\n     select(\"#\" + div).attr(\"class\", \"timescale\");\n\n      // !!!Move into draw!\n      // Create the SVG for the chart\n      const time = select(\"#\" + div).append(\"svg\")\n          .attr(\"width\", width)\n          .attr(\"height\", height + 20)\n          .append(\"g\");\n\n      // Move whole tick SVG group down 125px\n      const scale = time.append(\"g\")\n        .attr(\"id\", \"tickBar\")\n        .attr(\"transform\", `translate(0,${height-5})`);\n\n      // Create a new d3 partition layout\n      const partitionFunc = partition()\n        .size([width, height])\n        .padding(0);\n\n      // Load the time scale data\n      json(\"intervals.json\").then(function(result) {\n\n        // Construct hierarchy variable 'data' by oid's from paleoJSON\n        result.records.forEach(i => {\n          i.children = [];\n          i.pid = i.pid || 0; // Check if i is not a highest level period\n          i.abr = i.abr || i.nam.charAt(0);\n          i.mid = parseInt((i.eag + i.lag) / 2); //length of period\n          i.total = i.eag - i.lag;\n          interval_hash[i.oid] = i;\n          interval_hash[i.pid].children.push(i);\n        })\n        \n        root = hierarchy(data)\n          .sum(d => (d.children.length === 0) ? d.total + 0.117 : 0 ); //? add time for Holocene\n\n        partitionFunc(root);\n\n        const rectGroup = time.append(\"g\")\n          .attr(\"id\", \"rectGroup\");\n\n        // Create the rectangles\n        rectGroup.selectAll(\"rect\")\n            .data( root.descendants() )\n          .enter().append(\"rect\")\n            .attr(\"x\", function(d) { return d.x0; })\n            .attr(\"y\", function(d) { return d.y0; })\n            .attr(\"width\", function(d) { return d.x1 - d.x0; })\n            .attr(\"height\", function(d) { return d.y1 - d.y0; })\n            .attr(\"fill\", function(d) { return d.data.col || \"#000\"; })\n            .attr(\"id\", function(d) { return \"t\" + d.data.oid; })\n            .style(\"opacity\", 0.83)\n            // .call(dragFunc)\n            .on(\"click\", function(d) { timescale.goTo(d); });\n\n        // Scale bar for the bottom of the graph\n        const scaleBar = scale.selectAll(\"rect\")\n          .data(root.descendants());\n\n        const hash = scaleBar.enter().append(\"g\")\n          .attr(\"class\", function(d) { return \"tickGroup s\" + d.data.lvl})\n          .attr(\"transform\", function(d) { return `translate(${d.x0}, 0)`}); \n\n        hash.append(\"line\")\n          .attr(\"x1\", 0)\n          .attr(\"y1\", 6)\n          .attr(\"x2\", 0)\n          .attr(\"y2\", 12)\n          .style(\"stroke-width\", \"0.05em\");\n\n        hash.append(\"text\")\n          .attr(\"x\", 0)\n          .attr(\"y\", 25)\n          .style(\"text-anchor\", function(d) { return (d.data.eag !== 0.0117) ? \"middle\" : \"end\"; })\n          .style(\"font-size\", \"1.2em\")\n          .style(\"fill\", \"#000\")\n          .text(function(d) { return d.data.eag; });\n\n        // Create a tick for year 0\n        const now = scale.append(\"g\")\n          .data([{x0: width, y0: 0 }])\n          .attr(\"class\", \"tickGroup s1 s2 s3 s4 s5\")\n          .attr(\"transform\",`translate(${width}, 0)`);\n\n        now.append(\"line\")\n          .attr(\"x1\", 0)\n          .attr(\"y1\", 6)\n          .attr(\"x2\", 0)\n          .attr(\"y2\", 12)\n          .style(\"stroke-width\", \"0.05em\");\n\n        now.append(\"text\")\n          .attr(\"x\", 4)\n          .attr(\"y\", 25)\n          .attr(\"id\", \"now\")\n          .style(\"fill\", \"white\")\n          .style(\"text-anchor\", \"end\")\n          .style(\"font-size\", \"1.2em\")\n          .style(\"fill\", \"#777\")\n            .text(\"0\");\n\n        const textGroup = time.append(\"g\")\n          .attr(\"id\", \"textGroup\");\n\n        // Add the full labels\n        textGroup.selectAll(\"fullName\")\n            .data( root.descendants() )\n          .enter().append(\"text\")\n            .text(function(d) { return d.data.nam; })\n            .attr(\"x\", 1)\n            .attr(\"y\", function(d) { return d.y0 + 15;})\n            .attr(\"width\", function() { return this.getComputedTextLength(); })\n            .attr(\"height\", function(d) { return d.y1 - d.y0; })\n            .attr(\"class\", function(d) { return \"fullName level\" + d.data.lvl; })\n            .attr(\"id\", function(d) { return \"l\" + d.data.oid; })\n            .attr(\"x\", function(d) { return timescale.labelX(d); })\n            .on(\"click\", function(d) { timescale.goTo(d); });\n\n        // Add the abbreviations\n        textGroup.selectAll(\"abbrevs\")\n            .data( root.descendants() )\n          .enter().append(\"text\")\n            .attr(\"x\", 1)\n            .attr(\"y\", function(d) { return d.y0 + 15; })\n            .attr(\"width\", 30)\n            .attr(\"height\", function(d) { return d.y1 - d.y0; })\n            .text(function(d) { return d.data.abr; }) //charAt(0)\n            .attr(\"class\", function(d) { return \"abbr level\" + d.data.lvl; })\n            .attr(\"id\", function(d) { return \"a\" + d.data.oid; })\n            .attr(\"x\", function(d) { return timescale.labelAbbrX(d); })\n            .on(\"click\", function(d) { timescale.goTo(d); });\n\n        // Position the labels for the first time\n        timescale.goTo(root);\n\n        // Remove the Geologic time abbreviation\n        select(\".abbr.levelundefined\").remove();\n        \n        // Open to Phanerozoic \n        timescale.goTo(\"Phanerozoïcum\");\n        timescale.currentInterval = searchTree(root, \"nam\", \"Phanerozoïcum\");\n      }); // End PaleoDB json callback\n      //attach window resize listener to the window\n      select(window).on(\"resize\", timescale.resize);\n    },\n\n    // Calculates x-position for label abbreviations\n    \"labelAbbrX\": function(d) {\n      const rectWidth = parseFloat(select(\"#t\" + d.data.oid).attr(\"width\")),\n          rectX = parseFloat(select(\"#t\" + d.data.oid).attr(\"x\"));\n\n      let labelWidth = select(\"#a\" + d.data.oid).node().getComputedTextLength();\n\n      if (rectWidth - 8 < labelWidth) {\n       select(\"#a\" + d.data.oid).style(\"display\", \"none\");\n      }\n\n      return rectX + (rectWidth - labelWidth) / 2;\n    },\n    \n    \"labelX\": function(d) {\n      const rectWidth = d.x1 - d.x0;\n      const rectX = d.x0;\n\n      let labelWidth;\n      try {\n        labelWidth = select(\"#l\" + d.data.oid).node().getComputedTextLength();\n      } catch(err) {\n        labelWidth = 25;\n      }\n\n      // Hide full names if they are too small for their rectangles\n      if (rectWidth - 10 < labelWidth) {\n       select(\"#l\" + d.data.oid).style(\"display\", \"none\");\n      } else {\n       select(\"#a\" + d.data.oid).style(\"display\", \"none\");\n      }\n\n      return rectX + (rectWidth - labelWidth) / 2;\n    },\n\n    // Zooms the graph to a given time interval\n    // Accepts a data point or a named interval\n    \"goTo\": function(d) {\n      // console.log(\"goto\", d);\n      if (typeof d == \"string\") {\n        d = searchTree(root, \"nam\", d)\n      } else if (d.children) {\n          if (d.children.length < 1) {\n            d = d.data.parent;\n          }\n      }\n\n      // Stores the currently focused time interval for state restoration purposes\n      timescale.currentInterval = d;\n\n     selectAll(\".fullName\")\n      .style(\"display\", \"block\");\n\n     selectAll(\".abbr\")\n        .style(\"display\", \"block\");\n      \n      // Adjust the bottom scale\n      const depth = (d.depth !== 'undefined') ? parseInt(d.depth) + 1 : 1;\n     selectAll(\".scale\").style(\"display\", \"none\");\n     selectAll(\".tickGroup\").style(\"display\", \"none\");\n     selectAll(\".s\" + depth).style(\"display\", \"block\");\n\n      const x = scaleLinear()\n        .range([5, width])\n        .domain([d.x0, d.x1]); \n\n      // Define transition for concurrent animation\n      const t = transition()\n        .duration(300)\n        .ease(easeLinear);\n\n      // Transition the rectangles\n     selectAll(\"rect\").transition(t)\n        .attr(\"x\", function(d) { return x(d.x0); })\n        .attr(\"width\", function(d) { return x(d.x1) - x(d.x0); })    \n\n      // Transition tick groups\n     selectAll(\".tickGroup\").transition(t)\n        .attr(\"transform\", function(d) {\n         select(this).selectAll(\"text\").style(\"text-anchor\", \"middle\");\n          if (x(d.x0) === 5) {\n           select(this).select(\"text\")\n              .style(\"text-anchor\", \"start\");\n          } else if (d.x0 === width) {\n           select(this).select(\"text\")\n              .style(\"text-anchor\", \"end\");\n          }\n          if (typeof x(d.x0) === 'number') {return `translate(${x(d.x0)}, 0)`}\n        });\n        \n      // Move the full names, to keep animation concurrent labelX has to be calculated inside to goTo function\n     selectAll(\".fullName\").transition(t)\n        .attr(\"x\", function(d) { \n            const rectWidth = x(d.x1) - x(d.x0),\n                  rectX = x(d.x0);\n\n            let labelWidth;\n            try {\n              labelWidth = select(\"#l\" + d.data.oid).node().getComputedTextLength(); //this?\n            } catch(err) {\n              labelWidth = 25;\n            }\n\n            if (rectWidth - 8 < labelWidth) {\n             select(\"#l\" + d.data.oid).style(\"display\", \"none\");\n           } else {\n             select(\"#a\" + d.data.oid).style(\"display\", \"none\");\n           }\n\n            return rectX + (rectWidth - labelWidth) / 2;\n        })\n        .attr(\"height\", function(d) { return d.y1 - d.y0; })\n\n      //Move the abbreviations\n      selectAll(\".abbr\").transition(t)\n        .attr(\"x\", function(d) {\n          const rectWidth = x(d.x1) - x(d.x0);\n          const rectX = x(d.x0);\n\n          let abbrevWidth = select(\"#a\" + d.data.oid).node().getComputedTextLength();\n          \n          if (rectWidth - 8 < abbrevWidth) {\n           select(\"#a\" + d.data.oid).style(\"display\", \"none\");\n          }\n          \n          return rectX + (rectWidth - abbrevWidth) / 2;\n        })\n        .attr(\"height\", function(d) { return d.y1 - d.y0; })\n        .on(\"end\", function() { \n         selectAll(\".fullName\").style(\"fill\", \"#333\");\n         selectAll(\".abbr\").style(\"fill\", \"#333\");\n        });\n\n      // Center whichever interval was clicked\n      select(\"#l\" + d.data.oid).transition(t)\n        .attr(\"x\", width/2);\n\n      // Position all the parent labels in the middle of the scale\n      if (d.parent !== null) {\n        const depth = d.depth;\n        let loc = \"d.parent\";\n        for (let i=0; i < depth; i++) {\n          const parent = eval(loc).data.nam;\n          selectAll('.abbr').filter(d => d.data.nam === parent ).transition(t)\n            .attr(\"x\", width/2);\n          selectAll('.fullName').filter(d => d.data.nam === parent ).transition(t)\n            .attr(\"x\", width/2);\n          loc += \".parent\";\n        }\n        selectAll('.abbr').filter(d => d.data.nam === d.parent).transition(t)\n          .attr(\"x\", width/2);\n        selectAll('.fullName').filter(d => d.data.nam === d.parent).transition(t)\n          .attr(\"x\", width/2);\n      }        \n    },\n\n    // Highlight a given time interval\n    \"highlight\": function(d) {\n\n     selectAll(\"rect\").style(\"stroke\", \"#fff\");\n     let id;\n      if (d.cxi) {\n        id = d.cxi;\n       selectAll(\"rect#t\" + d.cxi).style(\"stroke\", \"#000\").moveToFront();\n       selectAll(\"#l\" + d.cxi).moveToFront();\n      } else if (typeof d == \"string\") {\n        id = selectAll('rect').filter(function(e) {\n          return e.nam === d;\n        }).attr(\"id\");\n        id = id.replace(\"t\", \"\");\n      } else {\n        id = select(d).attr(\"id\");\n        id = id.replace(\"p\", \"\");\n      }\n\n     selectAll(`rect#t${id}`).style(\"stroke\", \"#000\").moveToFront();\n     selectAll(\"#l\" + id).moveToFront();\n     selectAll(\".abbr\").moveToFront();\n    },\n\n    // Unhighlight a time interval by resetting the stroke of all rectangles\n    \"unhighlight\": function() {\n     selectAll(\"rect\").style(\"stroke\", \"#fff\");\n    },\n\n    \"resize\": function() {\n      width = window.innerWidth - 4;\n      \n      select(\".timescale svg\")\n        .style(\"width\", width)\n\n      // setTimeout(() => {\n      //   timescale.goTo(timescale.currentInterval.data.nam)\n      // }, 600);\n    },\n\n    /* Interval hash can be exposed publically so that the time scale data can be used \n       for other things, such as maps */\n    // https://github.com/d3/d3-hierarchy/issues/58 \n    \"interval_hash\": interval_hash, \n\n    // Method for getting the currently zoomed-to interval - useful for preserving states\n    \"currentInterval\": currentInterval\n  }\n})();\n\nexport default timescale;","import React, {PureComponent} from 'react';\nimport timescale from './timescale';\n\nimport plaatsen from './plaatsen.json';\n\nconst defaultContainer =  ({children}) => <div className=\"control-panel\">{children}</div>;\n\nexport default class ControlPanel extends PureComponent {\n  \n    constructor(props) {\n        super(props);    \n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    state = { \n        index: 0\n    }\n\n    componentDidMount() {\n        timescale.init(\"timescale\");\n    }\n\n    handleClick(amount) {\n        const { index } = this.state;\n        // console.log({index});\n        if (index => 0 && index < plaatsen.length - 1 ) {\n            this.setState((prevState) => {\n                return { index: prevState.index+amount };\n            });\n         \n            const place = plaatsen[this.state.index + amount];\n            place && this.props._easeTo(place);\n            // if (place.mapstyle) { this.props.changeMapStyle(place.mapstyle); }; ////\"mapstyle\": \"mapbox://styles/mapbox/satellite-streets-v9\"\n            place && timescale.goTo(place.period);\n        }\n    }\n  \n    render() {\n        const Container = this.props.containerComponent || defaultContainer;\n        const currentPlace = plaatsen[this.state.index];\n        // console.log(\"index\", this.state.index);\n\n        return (\n            <Container>\n                <div className=\"text\">\n                    <h2>{currentPlace.name}</h2>\n                    <h3>{currentPlace.period}</h3>\n                    <p dangerouslySetInnerHTML={ {__html:currentPlace.description} } />\n                </div>\n                <div id=\"button-bar\">\n                    <button\n                        onClick={() => this.handleClick(-1)}\n                        className=\"control\"\n                        disabled={this.state.index === 0}>\n                        Vorige\n                    </button>\n                    <button \n                        onClick={() => this.handleClick(1)} \n                        className=\"control\"\n                        disabled={this.state.index === plaatsen.length}>\n                        Volgende\n                    </button>\n                </div>\n                <div id=\"timescale\"></div>\n                {/* {this.props.interruptionStyles.map(this._renderStyleOptions.bind(this))} */}\n            </Container>\n        );\n  }\n}","/*\n1. Add correct lat lon's\n2. Add more text\n3. Bundle mapbox CSS\n4. Add meta description\n\nPotential\n0. Images and (temperature) charts\n1. Async descriptions\n2. Performance improvements\n3. Bring water to front\n*/\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport ReactMapGL, { FlyToInterpolator } from 'react-map-gl'; //, NavigationControl\nimport DeckGL from '@deck.gl/react';\nimport { GeoJsonLayer } from  '@deck.gl/layers';\nimport { MapboxLayer } from \"@deck.gl/mapbox\";\nimport { MapController } from '@deck.gl/core';\n\nimport ControlPanel from './ControlPanel';\n\nimport geomap from './geologielimburg.json';\nimport key from './key.json'\n\nconst MAPBOX_ACCESS_TOKEN = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN\n\nconsole.log(FlyToInterpolator)\n\nexport default class App extends Component {\n\n  constructor(props) {\n    super(props);\n    this._resize = this._resize.bind(this);\n    this._onHover = this._onHover.bind(this);\n    this._onViewStateChange = this._onViewStateChange.bind(this);\n    this._renderTooltip = this._renderTooltip.bind(this);\n    // this._goToViewport = this._goToViewport.bind(this);\n  }\n\n  state = {\n    mapStyle: 'mapbox://styles/wompo/cjq4cbqju9k5a2sqmz8lwcepk',\n    viewState: {\n      longitude: 5.850884,\n      latitude: 50.864828,\n      zoom: 10,\n      maxZoom: 16,\n      pitch: 15,\n      bearing: 0\n    }\n  };\n\n  componentDidMount() {\n    window.addEventListener('resize', this._resize);\n    this._resize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this._resize);\n  } \n  \n  _resize() {\n    this.setState({\n      viewState: {\n        ...this.state.viewState,\n        width: this.props.width || window.innerWidth,\n        height: this.props.height || window.innerHeight\n      }\n    });\n  }\n\n  _onHover({x, y, object}) {\n    this.setState({x, y, hoveredObject: object});\n  }\n\n  _renderTooltip() {\n    const {x, y, hoveredObject} = this.state;\n    return (\n      hoveredObject && (\n        <div className=\"tooltip\" style={{top: y, left: x, zIndex: 1000}}>\n          <div>\n            <b>Formatie</b>\n          </div>\n          <div>\n            <div dangerouslySetInnerHTML={ {__html: key[hoveredObject.properties.KRTCODE].info} } />\n          </div>\n        </div>\n      )\n    );\n  }\n\n  _easeTo = ({latitude, longitude, zoom}) => {\n    console.log(\"going to viewport\", latitude, longitude, zoom);\n    this.setState({\n      viewState: {\n        ...this.state.viewState,\n        longitude,\n        latitude,\n        zoom,\n        pitch: 0,\n        bearing: 0,\n        transitionDuration: 8000,\n        transitionInterpolator: new FlyToInterpolator()\n      }\n    });\n  };\n\n  _onStyleChange(style) {\n    this._interruptionStyle = style;\n  }\n\n  _onViewStateChange({viewState}) {\n    this.setState({viewState});\n  }\n\n  // DeckGL and mapbox will both draw into this WebGL context\n  _onWebGLInitialized = (gl) => {\n    this.setState({gl});\n  }\n\n  // Add deck layer to mapbox\n  _onMapLoad = () => {\n    const map = this._map;\n    const deck = this._deck;\n    map.addLayer(new MapboxLayer({id: 'geologicalmap', deck}), 'waterway-label');\n  }\n\n  _renderLayers() {\n    const {data = geomap} = this.props;\n    return [\n        new GeoJsonLayer({\n          id: 'geologicalmap',\n          data,\n          opacity: 0.4,\n          stroked: true,\n          filled: true,\n          fp64: true,\n          getFillColor: f => key[f.properties.KRTCODE].color,\n          getLineColor: [255, 255, 255, 59],\n          pickable: true,\n          onHover: this._onHover\n        })\n      ];\n  }\n\n  render() {\n    const {gl, viewState, mapStyle} = this.state;\n    const {controller = {type: MapController, dragRotate: false}} = this.props;\n\n    return (\n      <>\n        <DeckGL\n          width={\"70%\"}\n          ref={ref => {this._deck = ref && ref.deck;}}\n          layers={this._renderLayers()}\n          viewState={viewState}\n          onViewportChange={this._onViewStateChange}\n          controller={controller}\n          onWebGLInitialized={this._onWebGLInitialized}\n        >\n          {gl && (\n            <ReactMapGL\n              ref={ref => { this._map = ref && ref.getMap(); }} // save a reference to the mapboxgl.Map instance\n              gl={gl}\n              onLoad={this._onMapLoad}\n              reuseMaps\n              mapStyle={mapStyle}\n              preventStyleDiffing={true}\n              mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN}\n              minZoom={10}\n              maxZoom={14}\n              minPitch={0}\n              maxPitch={60}\n            >\n              {/* <NavigationControl onViewportChange={this._onViewStateChange} /> */}\n            </ReactMapGL>\n          )}\n          {this._renderTooltip()}\n        </DeckGL>\n        <ControlPanel\n          containerComponent={this.props.containerComponent}\n          _easeTo={this._easeTo.bind(this)}\n        />\n      </>\n    );\n  }\n}\n\nexport function renderToDom(container) {\n  render(<App/>, container);\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}